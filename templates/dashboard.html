{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dashboard | Task Manager</title>
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar">
    <div class="logo">TaskManager</div>
    <ul class="nav-links">
        <li><a href="{% url 'home' %}">Home</a></li>
        <li><a href="{% url 'taskcreate' %}">Tasks</a></li>
        <li><a href="#">Dashboard</a></li>
        <li><a href="{% url 'profile' %}" >Profile</a></li>
    </ul>
</nav>
<div class="dashboard">

    <!-- Sidebar -->
    <aside class="sidebar">
    <br>    
        <ul>
            <li class="active">Dashboard</li>
            <li><a href="{% url 'mytask' %}"  id='mytask' >My Tasks</a></li>
            <li><a href="{% url 'completetask' %}" id='completetask'>Complete Tasks</a></li>
            <li><a href="{% url 'userlogout' %}"  id='logout'>logout</a></li>
        </ul>
    </aside>

    <!-- Main Content -->
    <main class="main">

    <!-- Welcome -->
    <section class="welcome">
        <h1>Welcome back ğŸ‘‹ {{ user.name }} </h1>
        <p>Hereâ€™s whatâ€™s happening with your tasks today.</p>
    </section>

    <!-- Stats Cards -->
    <section class="stats">
        <div class="card highlight">
            <h3>Total Tasks</h3>
            <p>{{ totaltask }}</p>
        </div>
        <div class="card">
            <h3>Pending</h3>
            <p class="pending">{{ pendingtask }}</p>
        </div>
        <div class="card">
            <h3>Completed</h3>
            <p class="completed">{{ completetask }}</p>
        </div>
    </section>

    <!-- Progress -->
<section class="progress-box">
    <h3>Task Progress</h3>

    <div class="progress-bar">
        <div class="progress-fill" style="width: {{ progress }}%;"></div>
    </div>

    <small>{{ completetask }} of {{ totaltask }} tasks completed</small>
</section>


    <!-- Quick Actions -->
    <section class="actions">
        <a href="{% url 'taskcreate' %}" class="action-btn">â• Add New Task</a>
        <a href="{% url 'mytask' %}" class="action-btn secondary">ğŸ“‹ View All Tasks</a>
    </section>

    <!-- Recent Tasks -->
    <section class="tasks">
        <h2>Recent Tasks</h2>
        <table>
            <thead>
                <tr>
                    <th>Task</th>
                    <th>Priority</th>
                    <th>Status</th>
                    <th>Due Date</th>
                </tr>
            </thead>
            <tbody>
                {% for i in task %}
                <tr>
                    <td>{{ i.title }}</td>
                    <td>
                        <span class="pill {{ i.priority|lower }}">
                            {{ i.priority }}
                        </span>
                    </td>
                    <td>
                        <span class="pill {{ i.status|lower }}">
                            {{ i.status }}
                        </span>
                    </td>
                    <td>
                        {% if i.due_date %}
                            {{ i.due_date }}
                        {% else %}
                            No date
                        {% endif %}
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="4" style="text-align:center; padding:20px;">
                        No tasks yet ğŸš€
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </section>

</main>

</div>

<footer class="footer">
    <p>Â© 2026 TaskManager | Built with Django â¤ï¸</p>
</footer>
<script src="{% static 'js/dashboard.js' %}"></script>
</body>
</html>
