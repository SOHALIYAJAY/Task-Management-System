{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dashboard | TaskManager</title>

    <!-- COMMON -->
    <link rel="stylesheet" href="{% static 'css/navbar-footer.css' %}">
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
</head>
<body>
{% include 'header.html' %}

<div class="layout">

    <!-- SIDEBAR -->
    <aside class="sidebar">
        <ul>
            <li class="active">Dashboard</li>
            <li><a href="{% url 'mytask' %}">My Tasks</a></li>
            <li><a href="{% url 'completetask' %}">Completed Tasks</a></li>
            <li><a href="{% url 'userlogout' %}">Logout</a></li>
        </ul>
    </aside>

    <!-- MAIN -->
    <main class="main">

        <!-- WELCOME -->
        <section class="welcome">
            <h1>Welcome back ðŸ‘‹ {{ user.name }}</h1>
            <p>Hereâ€™s whatâ€™s happening with your tasks today.</p>
        </section>

        <!-- STATS -->
        <section class="stats">
            <div class="card highlight">
                <h3>Total Tasks</h3>
                <p>{{ totaltask }}</p>
            </div>
            <div class="card">
                <h3>Pending</h3>
                <p class="pending">{{ pendingtask }}</p>
            </div>
            <div class="card">
                <h3>Completed</h3>
                <p class="completed">{{ completetask }}</p>
            </div>
        </section>

        <!-- PROGRESS -->
        <section class="progress-box">
            <h3>Task Progress</h3>
            <div class="progress-bar">
                <div class="progress-fill" style="width: {{ progress }}%;"></div>
            </div>
            <small>{{ completetask }} of {{ totaltask }} tasks completed</small>
        </section>

        <!-- ACTIONS -->
        <section class="actions">
            <a href="{% url 'taskcreate' %}" class="action-btn">âž• Add New Task</a>
            <a href="{% url 'mytask' %}" class="action-btn secondary">ðŸ“‹ View All Tasks</a>
        </section>

        <!-- TASKS -->
        <section class="tasks">
            <h2>Recent Tasks</h2>

            <table>
                <thead>
                    <tr>
                        <th>Task</th>
                        <th>Priority</th>
                        <th>Status</th>
                        <th>Due Date</th>
                    </tr>
                </thead>
                <tbody>
                {% for i in task %}
                    <tr>
                        <td>{{ i.title }}</td>
                        <td><span class="pill {{ i.priority|lower }}">{{ i.priority }}</span></td>
                        <td><span class="pill {{ i.status|lower }}">{{ i.status }}</span></td>
                        <td>{{ i.due_date|default:"No date" }}</td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="4" class="empty">No tasks yet ðŸš€</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </section>

    </main>
</div>

{% include 'footer.html' %}

<script src="{static 'js/dashboard.js' }"></script>